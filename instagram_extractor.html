<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram用户名提取器</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; background: #f9f9f9; }
        textarea { width: 100%; height: 300px; font-size: 16px; box-sizing: border-box; }
        button { padding: 12px 24px; font-size: 16px; margin: 10px 5px 0 0; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:active { background: #0056b3; }
        #output, #output2, #output3 { margin-top: 20px; padding: 15px; background: white; border: 1px solid #ddd; border-radius: 5px; font-size: 18px; white-space: pre-wrap; word-break: break-all; min-height: 100px; }
    </style>
</head>
<body>
    <h1>Instagram用户名提取器</h1>
    <p>粘贴链接列表（支持&lt;&gt;、https、www、带粉丝文字、多行），点提取 → 输出逗号分隔用户名。<br>保持原顺序，手机电脑通用。</p>
    
    <textarea id="input" placeholder="粘贴这里...&#10;例：&lt;https://www.instagram.com/maryhvp19&gt;&#10;&lt;https://instagram.com/fabern_cioccolato&gt; 粉丝:14"></textarea><br>
    <button onclick="extract()">提取用户名</button>
    <button onclick="copyResult()">复制结果</button>
    
    <div id="output">结果显示在这里</div>

    <!-- 功能1：格式转换器 -->
    <h2>格式转换器</h2>
    <p>粘贴原始数据（ID----用户名----密码...格式）</p>
    <textarea id="input2" placeholder="粘贴原始格式数据...&#10;例：&#10;37354 wusiufan----N31DG65i----xlje.3680188988@gosoftme.com----xlje.3680188988----OVVZOH7RJDAS7JO2ZJAOJW735T4XWB4X----[JSON数据]----香港"></textarea><br>
    <button onclick="convertFormat()">转换格式</button>
    <button onclick="copyResult2()">复制转换结果</button>
    <div id="output2">转换结果显示在这里</div>

    <!-- 功能2：Tab转分隔符转换器 -->
    <h2>Tab转分隔符转换器</h2>
    <p>将制表符(Tab)分隔的数据转换为----分隔格式</p>
    <textarea id="input3" placeholder="粘贴Tab分隔的数据...&#10;例：&#10;peterober666	VT0b8AjWXBfv	Q3HL D5YD Q3Z6 ZHZL O5UL 3CML 4WO3 7VYO	petrob85@gmx.com	q4J8ox42Ng	https://gmx.com/	https://2fa.plus/	us"></textarea><br>
    <button onclick="convertTabToSeparator()">Tab转----</button>
    <button onclick="copyResult3()">复制结果</button>
    <div id="output3">转换结果显示在这里</div>

    <script>
        // 功能1：提取Instagram用户名
        function extract() {
            let input = document.getElementById('input').value.trim();
            if (!input) {
                document.getElementById('output').innerText = '请输入内容';
                return;
            }
            
            let regex = /(?:https?:\/\/)?(?:www\.)?instagram\.com\/([a-zA-Z0-9._]+)/gi;
            let matches = input.matchAll(regex);
            let usernames = [];
            for (let match of matches) {
                usernames.push(match[1]);
            }
            
            if (usernames.length === 0) {
                document.getElementById('output').innerText = '未找到Instagram用户名\n请检查是否包含 instagram.com/用户名 格式';
                return;
            }
            
            let result = usernames.join(',');
            document.getElementById('output').innerText = result;
        }
        
        function copyResult() {
            let text = document.getElementById('output').innerText.trim();
            if (!text || text === '请输入内容' || text.includes('未找到')) {
                alert('无有效结果可复制');
                return;
            }
            
            let temp = document.createElement('textarea');
            temp.value = text;
            temp.style.position = 'fixed';
            temp.style.opacity = '0';
            document.body.appendChild(temp);
            temp.select();
            
            try {
                document.execCommand('copy');
                alert('已复制到剪贴板！');
            } catch (err) {
                alert('复制失败，请长按结果手动复制');
            }
            
            document.body.removeChild(temp);
        }
        
        // 功能2：格式转换器
        function convertFormat() {
            let input = document.getElementById('input2').value.trim();
            if (!input) {
                document.getElementById('output2').innerText = '请输入内容';
                return;
            }
            
            let lines = input.split('\n');
            let results = [];
            
            lines.forEach(line => {
                if (line.trim() === '') return;
                
                // 处理每行数据
                let firstPartEnd = line.indexOf('----');
                if (firstPartEnd === -1) return;
                
                let firstPart = line.substring(0, firstPartEnd);
                let rest = line.substring(firstPartEnd + 4);
                
                // 从firstPart中提取用户名
                let username = '';
                let lastSpaceIndex = firstPart.lastIndexOf(' ');
                if (lastSpaceIndex !== -1) {
                    username = firstPart.substring(lastSpaceIndex + 1);
                } else {
                    username = firstPart;
                }
                
                // 分割剩余部分
                let restParts = rest.split('----');
                
                // 提取各部分
                let password = restParts[0] || '';
                let email = restParts[1] || '';
                let userId = restParts[2] || '';
                let twofa = restParts[3] || '';
                let country = '';
                
                // 如果restParts有6个或更多元素，最后一个是国家
                if (restParts.length >= 6) {
                    country = restParts[restParts.length - 1];
                }
                
                // 构建新格式（新增一个----https://mail.gosoftme.com/）
                let newFormat = [
                    username,                      // 用户名
                    password,                      // 密码
                    twofa,                         // 2FA
                    email,                         // 邮箱
                    userId,                        // 用户ID
                    country,                       // 国家
                    'https://mail.gosoftme.com/',  // 新增的固定URL
                    'https://2fa.plus/'            // 固定URL
                ].join('----');
                
                results.push(newFormat);
            });
            
            if (results.length === 0) {
                document.getElementById('output2').innerText = '格式不正确或没有有效数据';
                return;
            }
            
            document.getElementById('output2').innerText = results.join('\n');
        }

        function copyResult2() {
            let text = document.getElementById('output2').innerText.trim();
            if (!text || text === '请输入内容' || text.includes('格式不正确')) {
                alert('无有效结果可复制');
                return;
            }
            
            let temp = document.createElement('textarea');
            temp.value = text;
            temp.style.position = 'fixed';
            temp.style.opacity = '0';
            document.body.appendChild(temp);
            temp.select();
            
            try {
                document.execCommand('copy');
                alert('已复制到剪贴板！');
            } catch (err) {
                alert('复制失败，请长按结果手动复制');
            }
            
            document.body.removeChild(temp);
        }
        
        // 功能3：Tab转分隔符转换器
        function convertTabToSeparator() {
            let input = document.getElementById('input3').value.trim();
            if (!input) {
                document.getElementById('output3').innerText = '请输入内容';
                return;
            }
            
            let lines = input.split('\n');
            let results = [];
            
            lines.forEach(line => {
                if (line.trim() === '') return;
                // 将Tab替换为----
                let converted = line.replace(/\t/g, '----');
                results.push(converted);
            });
            
            document.getElementById('output3').innerText = results.join('\n');
        }

        function copyResult3() {
            let text = document.getElementById('output3').innerText.trim();
            if (!text || text === '请输入内容') {
                alert('无有效结果可复制');
                return;
            }
            
            let temp = document.createElement('textarea');
            temp.value = text;
            temp.style.position = 'fixed';
            temp.style.opacity = '0';
            document.body.appendChild(temp);
            temp.select();
            
            try {
                document.execCommand('copy');
                alert('已复制到剪贴板！');
            } catch (err) {
                alert('复制失败，请长按结果手动复制');
            }
            
            document.body.removeChild(temp);
        }
    </script>
</body>
</html>
